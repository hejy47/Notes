# 微信小程序WePY框架中数据传递

## 页面间通信

1. 页面间跳转可以使用小程序官方路由API来实现，而其中的参数传递可以直接在url中附加参数，在跳转页面的onload函数读取即可。

2. 根据官方文档，tabBar页面的跳转只能使用wx.switchTab进行跳转，然而该API不允许在跳转路径中带参数。因此，如果tabBar中页面跳转并进行数据传递，可以通过设置全局变量进行数据传递。

## 组件间props传值

1. 静态传值

在父组件template模板部分的组件标签中，使用子组件props对象中所声明的属性名作为其属性名来接收父组件传递的值。

2. 动态传值

动态传值是指父组件向子组件传递动态数据内容，父子组件数据完全独立互不干扰。但可以通过使用.sync修饰符来达到父组件数据绑定至子组件的效果，也可以通过设置子组件props的twoWay: true来达到子组件数据绑定至父组件的效果。那如果既使用.sync修饰符，同时子组件props中添加的twoWay: true时，就可以实现数据的双向绑定了。

## 组件间通信与交互

1. wepy.component基类提供$broadcast、$emit、$invoke三个方法用于组件之间的通信和交互。

    * $broadcast事件是由父组件发起，所有子组件都会收到此广播事件，除非事件被手动取消。
    * $emit与$broadcast正好相反，事件发起组件的所有祖先组件会依次接收到$emit事件。
    * $invoke是一个页面或组件对另一个组件中的方法的直接调用，通过传入组件路径找到相应的组件，然后再调用其方法。

2. 用于监听组件之间的通信与交互事件的事件处理函数需要写在组件和页面的events对象中

3. Tips：对于复用组件，最好通过这三个方法进行父子组件间的通信交互，提高复用组件的多功能性。比如：在list组件中，涉及到页面跳转问题，应该使用$emit函数传递index到引入组件的页面，让页面进行跳转，而不应该组件直接跳转到页面。
